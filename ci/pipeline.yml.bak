---
resources:
- name: source-code
  type: git
  source:
    uri: https://github.com/mwalburn/pcf-ers-demo.git
    branch: master

#- name: version
#  type: semver
#  source:
#    bucket: mwalburn-concourse
#    key: current-version
#    access_key_id: {{s3-access-key-id}}
#    secret_access_key: {{s3-secret-access-key}}
#    initial_version: 1.0.0
#
#- name: pcf-ers-demo-rc
#  type: s3
#  source:
#    bucket: mwalburn-concourse
#    regexp: pcf-ers-demo-(.*).tgz
#    access_key_id: {{s3-access-key-id}}
#    secret_access_key: {{s3-secret-access-key}}
#
#- name: pws-dev
#  type: cf
#  source:
#    api: https://api.run.pivotal.io
#    username: {{cf-user}}
#    password: {{cf-pass}}
#    organization: mwalburn
#    space: development
#    skip_cert_check: true
#
jobs:
- name: build-ers-demo-dev
  public: true
  plan:
  - get: source-code
    trigger: false
  - task: build
    file: source-code/ci/build.yml
  - put: pws-dev
    params:
      manifest: source-code/manifest.yml
      path: build-output/pcf-ers-demo1-0.0.1-SNAPSHOT.jar
